<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SJWMS Maths | Home</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

  <style type="text/tailwindcss">
    body { @apply bg-[#020617] text-[#212121] font-[Lexend] overflow-x-hidden; }

    /* --- ENTRANCE ANIMATIONS --- */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(24px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
      animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      opacity: 0;
    }
    .delay-100 { animation-delay: 100ms; }
    .delay-200 { animation-delay: 200ms; }
    .delay-300 { animation-delay: 300ms; }
    .delay-400 { animation-delay: 400ms; }
    .delay-500 { animation-delay: 500ms; }
  </style>
</head>
<body>

  <main class="relative w-full min-h-screen flex flex-col justify-center bg-[#020617] py-12 lg:py-0">
    
    <div class="absolute inset-0 z-0 overflow-hidden">
      <img src="assets/li-zhang-DvwKzaY6Xm8-unsplash.webp" alt="Maths Revision" class="w-full h-full object-cover object-center filter brightness-[0.60]" />
      <div class="absolute inset-0 bg-gradient-to-r from-[#020617] via-[#0f172a]/90 to-transparent"></div>
    </div>

    <div class="relative z-10 w-full max-w-7xl mx-auto px-6 md:px-10 flex flex-col lg:flex-row items-center justify-between gap-12 text-left">
      
      <div class="max-w-2xl w-full">
         
         <div class="flex items-center gap-3 mb-6 animate-fade-in delay-100">
           <img src="assets/hub_logo.png" alt="SJWMS" class="h-10 w-auto filter drop-shadow-lg"/>
           <span class="font-extrabold tracking-tight text-white text-xl md:text-2xl drop-shadow-md">SJWMS Maths</span>
         </div>
         
         <h1 class="text-5xl md:text-7xl font-black text-white mb-6 leading-tight drop-shadow-xl animate-fade-in delay-200">
           What will you<br>
           <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400">
             revise today
           </span><br>
           and master?
         </h1>
         
         <p class="text-slate-300 text-lg md:text-xl font-medium drop-shadow-md mb-10 leading-relaxed max-w-lg animate-fade-in delay-300">
           Dive into structured worksheets, video tutorials, and practice quizzes designed specifically for your exams.
         </p>

         <div class="flex flex-wrap items-center gap-4 animate-fade-in delay-400">
           
           <a href="ks3_hub.html" class="group inline-flex items-center px-6 py-3 rounded bg-blue-500/20 border border-blue-400/30 backdrop-blur-sm shadow-lg hover:bg-blue-500/40 hover:border-blue-400/50 hover:-translate-y-0.5 transition-all duration-300">
             <span class="text-xs md:text-sm font-bold text-blue-200 uppercase tracking-widest group-hover:text-white transition-colors">KS3</span>
           </a>

           <a href="gcse_hub.html" class="group inline-flex items-center px-6 py-3 rounded bg-blue-500/20 border border-blue-400/30 backdrop-blur-sm shadow-lg hover:bg-blue-500/40 hover:border-blue-400/50 hover:-translate-y-0.5 transition-all duration-300">
             <span class="text-xs md:text-sm font-bold text-blue-200 uppercase tracking-widest group-hover:text-white transition-colors">GCSE</span>
           </a>

           <a href="alevel_hub.html" class="group inline-flex items-center px-6 py-3 rounded bg-blue-500/20 border border-blue-400/30 backdrop-blur-sm shadow-lg hover:bg-blue-500/40 hover:border-blue-400/50 hover:-translate-y-0.5 transition-all duration-300">
             <span class="text-xs md:text-sm font-bold text-blue-200 uppercase tracking-widest group-hover:text-white transition-colors">A-Level</span>
           </a>
           
           <div class="w-px h-8 bg-blue-400/30 mx-1 hidden sm:block"></div>

           <a href="ai_usage.html" class="group inline-flex items-center px-6 py-3 rounded bg-blue-500/20 border border-blue-400/30 backdrop-blur-sm shadow-lg hover:bg-blue-500/40 hover:border-blue-400/50 hover:-translate-y-0.5 transition-all duration-300">
             <span class="text-xs md:text-sm font-bold text-blue-200 uppercase tracking-widest group-hover:text-white transition-colors">AI Usage</span>
           </a>

         </div>

        <div class="mt-2 flex items-center gap-2 text-slate-400/80 animate-fade-in delay-400">
           <span class="material-icons text-[16px] text-white">camera</span>
           <p class="text-xs md:text-sm font-medium tracking-wide">Photo by <a href="https://unsplash.com/@sunx?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText" class="hover:text-white transition-colors">Li Zhang</a></p>
         </div>

      </div>

      <div id="updates-column" class="hidden w-full max-w-lg lg:w-[480px] flex-col gap-4 animate-fade-in delay-500 z-20">
        </div>

    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const response = await fetch('assets/data/home_updates.json');
        
        if (!response.ok) return; 

        const data = await response.json();
        const siteUpdates = data.items || []; 

        const updatesColumn = document.getElementById('updates-column');

        if (siteUpdates.length > 0) {
          updatesColumn.classList.remove('hidden');
          updatesColumn.classList.add('flex'); 

          siteUpdates.forEach((update, index) => {
            
            // 1. Handle long text with a smooth expander
            const isLong = update.text.length > 120; // Triggers if text is over ~2 lines
            let textHTML = '';
            
            if (isLong) {
              textHTML = `
                <div id="text-wrapper-${index}" class="relative overflow-hidden transition-all duration-500 max-h-[4.5rem] ease-in-out">
                  <p class="text-slate-300 text-sm leading-relaxed">${update.text}</p>
                </div>
                <button onclick="toggleUpdateText(${index})" id="toggle-btn-${index}" class="text-blue-400 hover:text-blue-300 text-xs font-bold mt-2 uppercase tracking-wide transition-colors">
                  Show More
                </button>
              `;
            } else {
              textHTML = `<p class="text-slate-300 text-sm leading-relaxed">${update.text}</p>`;
            }

            // 2. Handle optional button
            let buttonHTML = '';
            if (update.btnText && update.btnLink) {
              buttonHTML = `
                <div class="mt-4">
                  <a href="${update.btnLink}" class="inline-flex items-center px-4 py-2 rounded bg-blue-500/20 border border-blue-400/30 text-xs font-bold text-blue-200 uppercase tracking-widest hover:bg-blue-500/40 hover:text-white transition-all">
                    ${update.btnText}
                  </a>
                </div>
              `;
            }

            // 3. Construct the Card
            const updateCard = document.createElement('div');
            updateCard.className = "p-5 rounded-xl border border-white/20 bg-white/5 backdrop-blur-md shadow-lg";
            updateCard.innerHTML = `
              <div class="flex items-center gap-2 mb-2">
                <span class="material-icons text-blue-400 text-[18px]">${update.icon || 'info'}</span>
                <h3 class="text-white font-bold text-sm tracking-wide uppercase">${update.title}</h3>
              </div>
              ${textHTML}
              ${buttonHTML}
            `;
            
            updatesColumn.appendChild(updateCard);
          });
        }
      } catch (error) {
        console.error("Error loading updates:", error);
      }
    });

    // Global function to handle expanding/collapsing the text
    window.toggleUpdateText = function(index) {
      const wrapper = document.getElementById(`text-wrapper-${index}`);
      const btn = document.getElementById(`toggle-btn-${index}`);
      
      if (wrapper.classList.contains('max-h-[4.5rem]')) {
        wrapper.classList.remove('max-h-[4.5rem]');
        wrapper.classList.add('max-h-[800px]'); // arbitrary tall height to fit content
        btn.innerText = 'Show Less';
      } else {
        wrapper.classList.add('max-h-[4.5rem]');
        wrapper.classList.remove('max-h-[800px]');
        btn.innerText = 'Show More';
      }
    };
  </script>
</body>
</html>
