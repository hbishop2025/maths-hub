<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SPARX | Usage & Policy</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

  <style type="text/tailwindcss">
    body { @apply bg-white text-[#0b0f17] font-[Lexend] overflow-x-hidden; }

    /* KEEP: top nav */
    .header { @apply fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur border-b border-gray-200; }

    /* Page geometry */
    .page { @apply pb-20; }
    .wrap { @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8; }
    .grid-docs { @apply grid lg:grid-cols-[260px,1fr] gap-10 items-start; }

    /* Docs-like sidebar */
    .side { @apply hidden lg:block sticky top-20; }
    .side-title { @apply text-[11px] font-black uppercase tracking-widest text-gray-500; }
    .side-link { @apply flex items-center gap-3 px-2 py-2 rounded-lg text-sm font-semibold text-gray-700 hover:bg-gray-50 transition; }
    .side-link .material-icons { @apply text-[18px] text-gray-400; }
    .side-link.active { @apply bg-gray-100 text-gray-900; }
    .side-link.active .material-icons { @apply text-gray-900; }

    /* Sections: full-width feel via dividers and spacing */
    .section { @apply py-14; }
    .section + .section { @apply border-t border-gray-200; }
    .anchor { scroll-margin-top: 92px; }

    /* Typography rhythm */
    .eyebrow { @apply text-[11px] font-black uppercase tracking-widest text-gray-500; }
    .h1 { @apply text-4xl md:text-6xl font-black tracking-tight leading-[1.05]; }
    .h2 { @apply text-2xl md:text-3xl font-black tracking-tight; }
    .lead { @apply text-lg text-gray-600 max-w-2xl; }
    .p { @apply text-gray-600 leading-relaxed; }
    .tiny { @apply text-[12px] text-gray-600 leading-relaxed; }

    /* Pills + buttons */
    .pill { @apply inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-[11px] font-extrabold text-gray-700; }
    .btn { @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-3 text-sm font-extrabold border border-gray-200 bg-white hover:bg-gray-50 active:scale-[0.99] transition; }
    .btn-primary { @apply bg-black text-white border-black hover:bg-gray-900; }
    .btn-link { @apply inline-flex items-center gap-2 text-sm font-extrabold text-gray-900 hover:underline; }

    /* Divider list rows (Approved tools) */
    .row { @apply grid md:grid-cols-[1fr,auto] gap-6 py-6; }
    .row + .row { @apply border-t border-gray-200; }
    .row-title { @apply flex items-center gap-3; }
    .row-title h3 { @apply font-black text-lg; }
    .row-desc { @apply text-sm text-gray-600 mt-1 max-w-2xl; }
    .tags { @apply mt-3 flex flex-wrap gap-2; }
    .tag { @apply inline-flex items-center rounded-full border border-gray-200 bg-white px-3 py-1 text-[11px] font-extrabold text-gray-700; }

    /* Approved tools mesh aura (CSS-only, Option A) */
    .mesh {
    position: relative;
    overflow: hidden;
    }

    .mesh::before{
    content:"";
    position:absolute;
    inset:-200px;
    pointer-events:none;
    background:
      radial-gradient(600px 320px at 15% 20%, rgba(59,130,246,.12), transparent 60%),
      radial-gradient(700px 380px at 60% 10%, rgba(99,102,241,.10), transparent 65%),
      radial-gradient(600px 340px at 90% 60%, rgba(236,72,153,.08), transparent 60%);
    filter: blur(60px);
    opacity:.8;
    z-index:0;
    }

    /* Do / Don't layout (no cards) */
    .two-col { @apply grid md:grid-cols-2 gap-10; }
    .col-head { @apply flex items-center gap-2 font-black text-lg; }
    .list { @apply mt-4 space-y-3 text-sm text-gray-700; }
    .li { @apply flex gap-2; }
    .li .material-icons { @apply text-[18px]; }
    .divider-v { @apply hidden md:block w-px bg-gray-200; }

    /* Prompt Builder: tool area with internal dividers, not cards */
    .tool { @apply border-y border-gray-200; }
    .tool-grid { @apply grid lg:grid-cols-[1fr,420px] gap-10; }
    .tool-col { @apply py-10; }
    .tool-col + .tool-col { @apply lg:border-l lg:border-gray-200 lg:pl-10; }

    .opt-grid { @apply grid sm:grid-cols-2 gap-3; }
    .opt { @apply w-full border border-gray-200 rounded-xl px-4 py-3 text-sm font-semibold hover:bg-gray-50 hover:border-gray-300 active:scale-[0.99] transition flex items-center justify-between text-left; }
    .chipbar { @apply flex flex-wrap gap-2 mt-3; }
    .chip { @apply inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-3 py-1.5 text-[11px] font-extrabold text-gray-700 hover:bg-gray-50 cursor-pointer select-none; }
    .chip.on { @apply bg-gray-900 text-white border-gray-900; }

    .prompt-box {
      @apply font-mono bg-[#0b0f17] text-gray-100 rounded-2xl p-5 text-sm leading-relaxed border border-gray-800;
      white-space: pre-wrap;
    }

    .hint { @apply text-[12px] text-gray-500; }

    /* Callouts (Hallucinations + Privacy) */
    .callout { @apply border-l-4 border-gray-900 pl-4 py-2; }
    .callout-warn { @apply border-l-4 border-amber-500 pl-4 py-2; }
  </style>
</head>

<body>

  <!-- KEEP: Top Nav (unchanged) -->
  <header class="header">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img src="assets/hub_logo.png" alt="SJWMS" class="h-7 w-auto"/>
        <span class="font-extrabold tracking-tight">SJWMS Maths</span>
      </div>
      <nav class="hidden md:flex items-center gap-6">
        <a class="text-sm font-medium text-gray-700 hover:text-blue-600" href="index.html">Home</a>
        <a class="text-sm font-medium text-gray-700 hover:text-blue-600" href="ks3_hub.html">KS3</a>
        <a class="text-sm font-medium text-gray-700 hover:text-blue-600" href="gcse_hub.html">GCSE</a>
        <a class="text-sm font-medium text-gray-700 hover:text-blue-600" href="alevel_hub.html">A-Level</a>
        <a class="px-4 py-2 rounded-full bg-black text-white text-sm font-semibold hover:text-yellow-400" href="ai_usage.html">AI Usage</a>
      </nav>
    </div>
  </header>

  <main class="relative pt-14 pb-20">

  <!-- HERO -->
  <section class="relative w-full h-[500px] flex items-center overflow-hidden bg-[#020617] mb-16">
    <div class="absolute inset-0 z-0">
      <img src="assets/home-hero5.jpg" alt="Sparx Setup" class="w-full h-full object-cover object-center" />
      <div class="absolute inset-0 bg-gradient-to-r from-[#020617] via-[#0f172a]/80 to-transparent"></div>
    </div>

    <div class="relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
      <div class="max-w-xl">
        <div class="inline-flex items-center gap-2 px-3 py-1 mb-4 rounded bg-blue-500/20 border border-blue-400/30 backdrop-blur-sm">
          <span class="animate-pulse inline-flex h-1.5 w-1.5 rounded-full bg-blue-400"></span>
          <span class="text-[10px] font-bold text-blue-200 uppercase tracking-widest">Homework System</span>
        </div>

        <h1 class="text-5xl md:text-6xl font-black text-white mb-4 leading-tight drop-shadow-xl">
          Sparx Setup<br>
          <span class="text-blue-400">Guide & Protocol</span>
        </h1>

        <p class="text-slate-300 text-lg font-medium drop-shadow-md">
          How to log in, complete homework properly, and avoid common mistakes.
        </p>

        <div class="mt-8">
          <a href="#launch" class="group inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-white/10 border border-white/20 backdrop-blur-md text-white font-semibold hover:bg-white/20 transition">
            Launch Sparx
            <span class="material-icons text-sm">open_in_new</span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <div class="wrap pt-8">
    <div class="grid-docs">

      <!-- SIDEBAR -->
      <aside class="side pt-6">
        <div class="px-2">
          <div class="side-title">Sparx</div>
          <div class="text-lg font-black tracking-tight mt-1">Setup Guide</div>
        </div>

        <nav class="mt-4 space-y-1">
          <a class="side-link active" href="#overview"><span class="material-icons">info</span>Overview</a>
          <a class="side-link" href="#cycle"><span class="material-icons">schedule</span>Homework Cycle</a>
          <a class="side-link" href="#orange"><span class="material-icons">menu_book</span>Orange Book</a>
          <a class="side-link" href="#videos"><span class="material-icons">play_circle</span>Video Guides</a>
          <a class="side-link" href="#anti-cheat"><span class="material-icons">warning</span>AI & Cheating</a>
          <a class="side-link" href="#launch"><span class="material-icons">rocket_launch</span>Launch Sparx</a>
        </nav>
      </aside>

      <!-- MAIN CONTENT -->
      <div>

        <!-- OVERVIEW -->
        <section id="overview" class="anchor section">
          <div class="eyebrow">Overview</div>
          <h2 class="h2 mt-2">What Sparx is for</h2>
          <p class="p mt-4 max-w-3xl">
            Sparx is the school homework platform. Each week you complete a personalised set of maths questions.
            The goal is progress through consistency — not rushing or guessing.
          </p>
        </section>

        <!-- HOMEWORK CYCLE -->
        <section id="cycle" class="anchor section">
          <div class="eyebrow">Schedule</div>
          <h2 class="h2 mt-2">Homework Cycle</h2>
          <p class="p mt-4 max-w-3xl">
            Sparx runs from <b>Wednesday to Wednesday</b>. All work must be completed before the deadline.
          </p>
        </section>

        <!-- ORANGE BOOK -->
        <section id="orange" class="anchor section">
          <div class="eyebrow">Protocol</div>
          <h2 class="h2 mt-2">Orange Book Requirements</h2>
          <p class="p mt-4 max-w-3xl">
            Every Sparx question must be supported with written working in your orange book.
          </p>

          <ul class="mt-8 space-y-4 text-sm text-gray-700">
            <li class="flex gap-2"><span class="material-icons text-emerald-600">check</span>Write the Bookwork Code</li>
            <li class="flex gap-2"><span class="material-icons text-emerald-600">check</span>Show full working clearly</li>
            <li class="flex gap-2"><span class="material-icons text-emerald-600">check</span>Write the final answer neatly</li>
          </ul>
        </section>

        <!-- VIDEO GUIDES -->
        <section id="videos" class="anchor section">
          <div class="eyebrow">Support</div>
          <h2 class="h2 mt-2">Video Guides</h2>

          <div class="mt-8 grid md:grid-cols-2 gap-8">
            <div class="aspect-video rounded-xl overflow-hidden border border-gray-200">
              <iframe class="w-full h-full"
                src="https://www.youtube.com/embed/a92XCC0MeM0"
                allowfullscreen></iframe>
            </div>
            <div class="aspect-video rounded-xl overflow-hidden border border-gray-200">
              <iframe class="w-full h-full"
                src="https://www.youtube.com/embed/IQUMypfwHnU"
                allowfullscreen></iframe>
            </div>
          </div>
        </section>

        <!-- ANTI CHEAT -->
        <section id="anti-cheat" class="anchor section">
          <div class="eyebrow">Important</div>
          <h2 class="h2 mt-2">AI & Homework</h2>
          <p class="p mt-4 max-w-3xl">
            Using AI solvers to complete Sparx may trick the algorithm into thinking you are more advanced than you are.
            This results in future homework becoming significantly harder.
          </p>

          <div class="mt-8 callout-warn">
            Always attempt questions yourself first. Use AI only as a study aid — not as an answer generator.
          </div>
        </section>

        <!-- LAUNCH -->
        <section id="launch" class="anchor section">
          <div class="eyebrow">Access</div>
          <h2 class="h2 mt-2">Launch Sparx</h2>

          <div class="mt-8">
            <a href="https://selectschool.sparx-learning.com/"
               target="_blank"
               class="btn btn-primary">
              <span class="material-icons text-[18px]">rocket_launch</span>
              Launch Sparx
            </a>
          </div>
        </section>

      </div>
    </div>
  </div>
</main>
  <div id="footer-slot"></div>

  <script>
    // ===== Sidebar active section =====
    (function(){
      const nav = document.getElementById('sideNav');
      if(!nav) return;
      const links = Array.from(nav.querySelectorAll('a[href^="#"]'));
      const targets = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);

      const obs = new IntersectionObserver((entries)=>{
        const visible = entries.filter(e => e.isIntersecting).sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
        if(!visible) return;
        const id = '#' + visible.target.id;
        links.forEach(a => a.classList.toggle('active', a.getAttribute('href') === id));
      }, { rootMargin: "-30% 0px -60% 0px", threshold: [0.12, 0.2, 0.3] });

      targets.forEach(t => obs.observe(t));
    })();

    // ===== Prompt Builder: state =====
    let promptData = {
      goalKey: "",
      goalLabel: "",
      goalText: "",
      yearLabel: "",
      yearText: "",
      styleLabel: "",
      styleText: "",
      extras: {
        showSteps: false,
        checkAnswer: false,
        noBigJumps: false,
        miniQuiz: false
      }
    };

    const extrasText = {
      showSteps: "Show every step and explain why each step is valid.",
      checkAnswer: "At the end, verify the answer using a different method or a quick check.",
      noBigJumps: "Do not skip steps or make big jumps in reasoning.",
      miniQuiz: "After explaining, quiz me with 2 short questions and mark my answers."
    };

    const topicEl = () => document.getElementById('topicInput');
    const probEl  = () => document.getElementById('problemInput');

    document.addEventListener('input', (e) => {
      if(e.target && (e.target.id === 'topicInput' || e.target.id === 'problemInput')) updatePreview();
    });

    function setGoal(key, label, text){
      promptData.goalKey = key;
      promptData.goalLabel = label;
      promptData.goalText = text;

      // auto-open problem box when "stuck"
      if(key === "Stuck") toggleProblemBox(true);

      updatePreview();
    }

    function setYear(label, text){
      promptData.yearLabel = label;
      promptData.yearText = text;
      markChipGroup('year', label);
      updatePreview();
    }

    function setStyle(label, text){
      promptData.styleLabel = label;
      promptData.styleText = text;
      markChipGroup('style', label);
      updatePreview();
    }

    function toggleExtra(key){
      promptData.extras[key] = !promptData.extras[key];
      const chip = document.getElementById(`chip-${key}`);
      if(chip) chip.classList.toggle('on', promptData.extras[key]);
      updatePreview();
    }

    function markChipGroup(group, label){
      // Simple: visually "on" by toggling class based on innerText match
      // Year chips are in one bar; Style chips in another.
      const bars = document.querySelectorAll('.chipbar');
      bars.forEach(bar => {
        // identify year/style by presence of known items
        const text = bar.innerText || "";
        const isYear = text.includes("Year 7") && text.includes("GCSE");
        const isStyle = text.includes("Socratic") && text.includes("Mark scheme");
        if((group === 'year' && !isYear) || (group === 'style' && !isStyle)) return;

        Array.from(bar.querySelectorAll('.chip')).forEach(chip => {
          chip.classList.toggle('on', chip.innerText.trim() === label);
        });
      });
    }

    function toggleProblemBox(forceOpen){
      const wrap = document.getElementById('problemWrap');
      const toggleText = document.getElementById('problemToggleText');
      const open = (typeof forceOpen === "boolean") ? forceOpen : (wrap.style.display === "none");

      wrap.style.display = open ? "block" : "none";
      toggleText.innerText = open ? "Hide my question/working" : "Add my question/working";
      updatePreview();
    }

    function updatePreview(){
      const t = (topicEl()?.value || "").trim();
      const p = (probEl()?.value || "").trim();

      const lines = [];

      if(promptData.yearText) lines.push(promptData.yearText);

      if(promptData.goalText){
        if(t) lines.push(`Please ${promptData.goalText} ${t}.`);
        else lines.push(`Please ${promptData.goalText} [INSERT TOPIC HERE].`);
      } else {
        // no goal chosen yet
        if(t) lines.push(`Topic: ${t}`);
      }

      if(promptData.styleText) lines.push(promptData.styleText);

      const stuckMode = (promptData.goalKey === "Stuck");
      const includeProblem = stuckMode || p.length > 0;

      if(includeProblem){
        lines.push("");
        lines.push("Here is the problem (and my working if included):");
        lines.push(p ? p : "[PASTE QUESTION / WORKING HERE]");
        lines.push("");
        lines.push("Rules:");
        lines.push("- Give me ONE hint first (or ask me one question).");
        lines.push("- Do not give the full solution unless I ask.");
        lines.push("- If you spot a mistake in my working, tell me the first incorrect step and why.");
      }

      const enabledExtras = Object.keys(promptData.extras).filter(k => promptData.extras[k]);
      if(enabledExtras.length){
        lines.push("");
        lines.push("Extra requirements:");
        enabledExtras.forEach(k => lines.push(`- ${extrasText[k]}`));
      }

      lines.push("");
      lines.push("If you are unsure at any point, say so. Keep the method consistent with what is taught at school.");

      const prompt = lines.join("\n").trim();
      document.getElementById('promptPreview').innerText = prompt || "Choose options on the left, then type your topic.";
    }

    function copyPrompt(){
      const text = document.getElementById('promptPreview').innerText;
      if(!text || text.includes("Choose options")) return;

      navigator.clipboard.writeText(text).then(() => {
        const btnText = document.getElementById('copyText');
        const btnIcon = document.getElementById('copyIcon');
        btnText.innerText = "Copied!";
        btnIcon.innerText = "done";

        setTimeout(() => {
          btnText.innerText = "Copy";
          btnIcon.innerText = "content_copy";
        }, 1400);
      });
    }

    function resetBuilder(){
      promptData = {
        goalKey: "", goalLabel: "", goalText: "",
        yearLabel: "", yearText: "",
        styleLabel: "", styleText: "",
        extras: { showSteps:false, checkAnswer:false, noBigJumps:false, miniQuiz:false }
      };

      // reset chips
      document.querySelectorAll('.chip').forEach(ch => ch.classList.remove('on'));

      // hide problem box (but keep typed text)
      const wrap = document.getElementById('problemWrap');
      wrap.style.display = "none";
      document.getElementById('problemToggleText').innerText = "Add my question/working";

      updatePreview();
    }

    // init
    updatePreview();
  </script>

  <script src="assets/footer-loader.js" defer></script>
</body>
</html>
