<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>A-Level | Home</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700;800;900&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

  <link rel="stylesheet" href="assets/main.css"/>

  <style type="text/tailwindcss">
    :root { --accent1:#7C3AED; --accent2:#3B82F6; }

    body { @apply bg-[#f6f6f8] text-[#212121] font-[Lexend]; overflow-x:hidden; }

    /* Header + mobile menu */
    .header { @apply fixed top-0 left-0 right-0 z-30 bg-white/85 backdrop-blur border-b border-gray-200; }
    
    #mobileMenu {
      @apply absolute right-4 top-[3.25rem] bg-white/90 backdrop-blur-md border border-gray-200 shadow-lg rounded-xl px-4 py-3 z-40;
      width: 180px;
      transform-origin: top right;
      animation: menuIn .22s ease-out;
    }
    #mobileMenu a { @apply block text-sm font-medium text-gray-700 hover:text-[#135bec] py-1 text-center; }

    @keyframes menuIn {
      from { opacity: 0; transform: translateY(-6px) scale(0.98); }
      to   { opacity: 1; transform: translateY(0)    scale(1); }
    }

    /* Background dots */
    .math-grid {
      background-image:
        radial-gradient(circle at 1px 1px, rgba(0,0,0,0.05) 1px, transparent 0),
        radial-gradient(circle at 1px 1px, rgba(0,0,0,0.05) 1px, transparent 0);
      background-size: 40px 40px;
      background-position: 0 0, 20px 20px;
      mask-image: linear-gradient(to bottom, white 65%, transparent 100%);
    }

    .section-heading { @apply text-2xl font-bold text-gray-800; }

    /* Track pills */
    .track-wrap { @apply flex flex-wrap justify-center gap-3 mb-10; }
    .track-pill {
      @apply px-5 py-2.5 rounded-full text-sm font-bold border bg-white text-gray-600 border-gray-200 shadow-sm cursor-pointer transition-all duration-200 hover:bg-gray-50 hover:border-gray-300;
    }
    .track-pill-active {
      @apply bg-[#111827] text-white border-[#111827] shadow-md;
    }
    .track-pill-active:hover {
      @apply bg-[#000000] border-[#000000] text-white;
    }

    /* Cards */
    .icon-card {
      @apply flex flex-col items-center justify-center p-6 rounded-2xl bg-white border border-gray-200 shadow-sm transition-all duration-300;
    }
    .icon-card:hover {
      @apply shadow-lg -translate-y-1 border-blue-200;
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-14 flex items-center justify-between relative">
      <div class="flex items-center gap-3">
        <img src="assets/hub_logo.png" alt="SJWMS" class="h-7 w-auto"/>
        <span class="font-extrabold tracking-tight">SJWMS Maths</span>
      </div>

      <nav class="hidden md:flex items-center gap-6">
        <a class="text-sm font-medium text-gray-700 hover:text-[#135bec] transition" href="index.html">Home</a>
        <a class="text-sm font-medium text-gray-700 hover:text-[#135bec] transition" href="ks3_hub.html">KS3</a>
        <a class="text-sm font-medium text-gray-700 hover:text-[#135bec] transition" href="gcse_hub.html">GCSE</a>
        <a class="text-sm font-medium text-[#135bec]" href="alevel_hub.html">A-Level</a>
        <a class="px-4 py-2 rounded-full bg-[#111827] text-white text-sm font-semibold" href="ai_usage.html">
          AI Usage
        </a>
      </nav>

      <button id="menuBtn" class="md:hidden p-2 rounded-lg hover:bg-gray-200/60">
        <span class="material-icons">menu</span>
      </button>

      <div id="mobileMenu" class="hidden">
        <a href="index.html">Home</a>
        <a href="ks3_hub.html">KS3</a>
        <a href="gcse_hub.html">GCSE</a>
        <a href="alevel_hub.html">A-Level</a>
        <a class="rounded-full bg-[#111827] text-white font-semibold mt-2 py-1.5 px-3 block" href="ai_usage.html">AI Usage</a>
      </div>
    </div>
  </header>

  <div class="absolute inset-0 math-grid pointer-events-none"></div>

  <main class="relative pt-14 pb-20">

    <section class="relative w-full h-[500px] flex items-center overflow-hidden bg-[#020617] mb-16">
      
      <div class="absolute inset-0 z-0">
        <img src="assets/alevel-hero.jpg" alt="A-Level Hero" class="w-full h-full object-cover object-center" />
        <div class="absolute inset-0 bg-gradient-to-r from-[#020617] via-[#0f172a]/80 to-transparent"></div>
      </div>

      <div class="relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
        <div class="max-w-2xl">
           
           <div class="inline-flex items-center gap-2 px-3 py-1 mb-4 rounded bg-purple-500/20 border border-purple-400/30 backdrop-blur-sm">
             <span class="animate-pulse inline-flex h-1.5 w-1.5 rounded-full bg-purple-400"></span>
             <span class="text-[10px] font-bold text-purple-200 uppercase tracking-widest">KS5 â€¢ Years 12 & 13</span>
           </div>
           
           <h1 class="text-5xl md:text-6xl font-black text-white mb-4 leading-tight drop-shadow-xl">
             A-Level<br>
             <span class="text-purple-400">Mathematics</span>
           </h1>
           
           <p class="text-slate-300 text-lg font-medium drop-shadow-md mb-8 leading-relaxed">
             Your home for all A-level revision, please note that all links take you to an external site moderated by our head of KS5 maths.
           </p>

           <div class="flex flex-wrap gap-4">
             <a href="https://sites.google.com/sjwms.org.uk/mathsatthemath/exam-revision" target="_blank" class="group inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-white/10 border border-white/20 backdrop-blur-md text-white font-semibold transition-all duration-300 hover:bg-white/20 hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)]">
               <span>Exam Revision</span>
               <span class="material-icons text-sm group-hover:translate-x-1 transition-transform">menu_book</span>
             </a>

             <a href="https://sites.google.com/sjwms.org.uk/mathsatthemath/papers/a-questions" target="_blank" class="group inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-white/10 border border-white/20 backdrop-blur-md text-white font-semibold transition-all duration-300 hover:bg-white/20 hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)]">
               <span>A* Questions</span>
               <span class="material-icons text-sm group-hover:translate-x-1 transition-transform">edit_note</span>
             </a>
           </div>

        </div>
      </div>
    </section>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

      <div class="track-wrap" id="track-pill-wrap">
        </div>

      <section id="track-panels" class="space-y-12">
        <div class="animate-pulse space-y-4">
           <div class="h-8 bg-gray-200 rounded w-1/4"></div>
           <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
             <div class="h-48 bg-gray-200 rounded-2xl"></div>
             <div class="h-48 bg-gray-200 rounded-2xl"></div>
             <div class="h-48 bg-gray-200 rounded-2xl"></div>
           </div>
        </div>
      </section>

    </div>
  </main>

  <div id="footer-slot"></div>
  <script src="assets/footer-loader.js" defer></script>

  <script>
  (function(){
    const btn=document.getElementById('menuBtn');
    const menu=document.getElementById('mobileMenu');
    function closeMenu(){ menu.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); }
    function toggleMenu(e){ e.stopPropagation(); const open=menu.classList.contains('hidden'); menu.classList.toggle('hidden',!open); btn.setAttribute('aria-expanded',String(open)); }
    btn.addEventListener('click',toggleMenu);
    document.addEventListener('click',e=>{ if(!e.target.closest('#mobileMenu')&&!e.target.closest('#menuBtn')) closeMenu(); });
    document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeMenu(); });
  })();
  </script>

  <script>
    (function(){
      const PILL_WRAP = document.getElementById('track-pill-wrap');
      const PANEL_ROOT = document.getElementById('track-panels');
      const JSON_URL = 'assets/data/alevel_tracks.json'; 

      let TRACKS = [];
      let activeTrackId = null;

      function createPills(tracks){
        PILL_WRAP.innerHTML = '';
        tracks.forEach((track, index) => {
          const btn = document.createElement('button');
          btn.className = 'track-pill' + (index === 0 ? ' track-pill-active' : '');
          btn.dataset.trackId = track.id;
          btn.textContent = track.label;
          btn.addEventListener('click', () => {
            if (activeTrackId === track.id) return;
            setActiveTrack(track.id);
          });
          PILL_WRAP.appendChild(btn);
        });
      }

      function setActiveTrack(id){
        activeTrackId = id;

        // Update pills
        const pills = PILL_WRAP.querySelectorAll('.track-pill');
        pills.forEach(pill => {
          const isActive = pill.dataset.trackId === id;
          pill.classList.toggle('track-pill-active', isActive);
          // Optional: reset hover styles if needed by removing/adding classes
        });

        // Render content
        renderTrack(id);
      }

      function renderTrack(id){
        const track = TRACKS.find(t => t.id === id);
        if (!track){
          PANEL_ROOT.innerHTML = '<p class="text-sm text-slate-500">Nothing here yet.</p>';
          return;
        }

        const sections = Array.isArray(track.sections) ? track.sections : [];

        if (!sections.length){
          PANEL_ROOT.innerHTML = '<p class="text-sm text-slate-500">Content coming soon for this track.</p>';
          return;
        }

        const html = sections.map(section => {
          const cards = Array.isArray(section.cards) ? section.cards : [];

          const cardsHtml = cards.map(card => {
            const icon = card.icon || 'auto_awesome';
            const title = card.title || 'Untitled card';
            const desc = card.description || '';
            const url  = card.url || '';
            const isLink = !!url;

            // Generate tags if they exist
            const tagHtml = Array.isArray(card.tags) && card.tags.length
              ? '<div class="mt-3 flex flex-wrap justify-center gap-1">' +
                card.tags.map(t => 
                  `<span class="inline-flex items-center px-2 py-0.5 rounded-full bg-slate-50 text-[10px] font-semibold text-slate-500 border border-slate-100">${t}</span>`
                ).join('') +
              '</div>'
              : '';

            const inner = `
              <span class="material-symbols-outlined text-4xl text-slate-500 group-hover:text-blue-600 transition-colors">${icon}</span>
              <p class="mt-3 text-sm text-slate-800 font-bold text-center">${title}</p>
              <p class="mt-1 text-xs text-slate-500 text-center leading-relaxed">${desc}</p>
              ${tagHtml}
            `;

            if (isLink){
              return `
                <a href="${url}" target="_blank" rel="noopener" class="icon-card group">
                  ${inner}
                </a>
              `;
            } else {
              return `<div class="icon-card group">${inner}</div>`;
            }
          }).join('');

          // Using the "Header with line" style requested
          return `
            <section>
              <div class="flex items-center gap-4 mb-6">
                <h2 class="section-heading">${section.heading || ''}</h2>
                <div class="h-px bg-gray-200 flex-grow"></div>
              </div>
              
              ${section.subheading ? `<p class="text-sm text-gray-500 mb-6 -mt-4">${section.subheading}</p>` : ''}
              
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                ${cardsHtml}
              </div>
            </section>
          `;
        }).join('');

        PANEL_ROOT.innerHTML = html;
      }

      // Load JSON + initialise
      fetch(JSON_URL, { cache: 'no-store' })
        .then(r => r.json())
        .then(data => {
          TRACKS = Array.isArray(data.tracks) ? data.tracks : [];
          if (!TRACKS.length){
            PANEL_ROOT.innerHTML = '<p class="text-sm text-slate-500">No tracks found.</p>';
            return;
          }
          createPills(TRACKS);
          setActiveTrack(TRACKS[0].id); // default to first track
        })
        .catch(err => {
          console.error('Error loading A-level tracks JSON', err);
          PANEL_ROOT.innerHTML =
            '<div class="p-4 bg-red-50 text-red-600 rounded-lg text-sm">Unable to load content. Please ensure <code>assets/data/alevel_tracks.json</code> exists.</div>';
        });
    })();
  </script>

</body>
</html>
